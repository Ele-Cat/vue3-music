import{i as J,o as G,w as Q,a as Z,b as U,d as B,c as _,e as x,u as ee,f as K,F as oe,g as L,h as k,j as S,k as I,r as p,n as h,l as e,t as j,m as T,p as v,q as V,s as te,E as se,v as X,x as q,_ as H,C as ae,y as le,z as ne,A as re,B as ie,D as de,G as A,H as ue,I as ce,J as fe,K as me,L as ve,M as pe,N as ge,O as he,T as ye,P as Ce,Q as be,R as we,S as ke,U as Ee}from"./index-BqJXG86V.js";const $e=(...t)=>a=>{t.forEach(r=>{J(r)?r(a):r.value=a})},Le=(t,a,r,u)=>{let l={offsetX:0,offsetY:0};const i=g=>{const E=g.clientX,$=g.clientY,{offsetX:C,offsetY:b}=l,f=t.value.getBoundingClientRect(),n=f.left,w=f.top,D=f.width,N=f.height,M=document.documentElement.clientWidth,F=document.documentElement.clientHeight,O=-n+C,z=-w+b,P=M-n-D+C,Y=F-w-N+b,m=o=>{let d=C+o.clientX-E,c=b+o.clientY-$;u!=null&&u.value||(d=Math.min(Math.max(d,O),P),c=Math.min(Math.max(c,z),Y)),l={offsetX:d,offsetY:c},t.value&&(t.value.style.transform=`translate(${U(d)}, ${U(c)})`)},R=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",R)};document.addEventListener("mousemove",m),document.addEventListener("mouseup",R)},y=()=>{a.value&&t.value&&a.value.addEventListener("mousedown",i)},s=()=>{a.value&&t.value&&a.value.removeEventListener("mousedown",i)};G(()=>{Q(()=>{r.value?y():s()})}),Z(()=>{s()})},W=Symbol("dialogInjectionKey"),Ie=["aria-level"],Te=["aria-label"],De=["id"],Me=B({name:"ElDialogContent"}),Re=B({...Me,props:_,emits:x,setup(t){const a=t,{t:r}=ee(),{Close:u}=ae,{dialogRef:l,headerRef:i,bodyId:y,ns:s,style:g}=K(W),{focusTrapRef:E}=K(oe),$=L(()=>[s.b(),s.is("fullscreen",a.fullscreen),s.is("draggable",a.draggable),s.is("align-center",a.alignCenter),{[s.m("center")]:a.center}]),C=$e(E,l),b=L(()=>a.draggable),f=L(()=>a.overflow);return Le(l,i,b,f),(n,w)=>(k(),S("div",{ref:e(C),class:h(e($)),style:q(e(g)),tabindex:"-1"},[I("header",{ref_key:"headerRef",ref:i,class:h([e(s).e("header"),{"show-close":n.showClose}])},[p(n.$slots,"header",{},()=>[I("span",{role:"heading","aria-level":n.ariaLevel,class:h(e(s).e("title"))},j(n.title),11,Ie)]),n.showClose?(k(),S("button",{key:0,"aria-label":e(r)("el.dialog.close"),class:h(e(s).e("headerbtn")),type:"button",onClick:w[0]||(w[0]=D=>n.$emit("close"))},[T(e(se),{class:h(e(s).e("close"))},{default:v(()=>[(k(),V(te(n.closeIcon||e(u))))]),_:1},8,["class"])],10,Te)):X("v-if",!0)],2),I("div",{id:e(y),class:h(e(s).e("body"))},[p(n.$slots,"default")],10,De),n.$slots.footer?(k(),S("footer",{key:0,class:h(e(s).e("footer"))},[p(n.$slots,"footer")],2)):X("v-if",!0)],6))}});var Se=H(Re,[["__file","dialog-content.vue"]]);const Ae=["aria-label","aria-labelledby","aria-describedby"],Be=B({name:"ElDialog",inheritAttrs:!1}),Ne=B({...Be,props:le,emits:ne,setup(t,{expose:a}){const r=t,u=re();ie({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},L(()=>!!u.title));const l=de("dialog"),i=A(),y=A(),s=A(),{visible:g,titleId:E,bodyId:$,style:C,overlayDialogStyle:b,rendered:f,zIndex:n,afterEnter:w,afterLeave:D,beforeLeave:N,handleClose:M,onModalClick:F,onOpenAutoFocus:O,onCloseAutoFocus:z,onCloseRequested:P,onFocusoutPrevented:Y}=ue(r,i);ce(W,{dialogRef:i,headerRef:y,bodyId:$,ns:l,rendered:f,style:C});const m=be(F),R=L(()=>r.draggable&&!r.fullscreen);return a({visible:g,dialogContentRef:s}),(o,d)=>(k(),V(Ce,{to:o.appendTo,disabled:o.appendTo!=="body"?!1:!o.appendToBody},[T(ye,{name:"dialog-fade",onAfterEnter:e(w),onAfterLeave:e(D),onBeforeLeave:e(N),persisted:""},{default:v(()=>[fe(T(e(me),{"custom-mask-event":"",mask:o.modal,"overlay-class":o.modalClass,"z-index":e(n)},{default:v(()=>[I("div",{role:"dialog","aria-modal":"true","aria-label":o.title||void 0,"aria-labelledby":o.title?void 0:e(E),"aria-describedby":e($),class:h(`${e(l).namespace.value}-overlay-dialog`),style:q(e(b)),onClick:d[0]||(d[0]=(...c)=>e(m).onClick&&e(m).onClick(...c)),onMousedown:d[1]||(d[1]=(...c)=>e(m).onMousedown&&e(m).onMousedown(...c)),onMouseup:d[2]||(d[2]=(...c)=>e(m).onMouseup&&e(m).onMouseup(...c))},[T(e(ve),{loop:"",trapped:e(g),"focus-start-el":"container",onFocusAfterTrapped:e(O),onFocusAfterReleased:e(z),onFocusoutPrevented:e(Y),onReleaseRequested:e(P)},{default:v(()=>[e(f)?(k(),V(Se,pe({key:0,ref_key:"dialogContentRef",ref:s},o.$attrs,{center:o.center,"align-center":o.alignCenter,"close-icon":o.closeIcon,draggable:e(R),overflow:o.overflow,fullscreen:o.fullscreen,"show-close":o.showClose,title:o.title,"aria-level":o.headerAriaLevel,onClose:e(M)}),ge({header:v(()=>[o.$slots.title?p(o.$slots,"title",{key:1}):p(o.$slots,"header",{key:0,close:e(M),titleId:e(E),titleClass:e(l).e("title")})]),default:v(()=>[p(o.$slots,"default")]),_:2},[o.$slots.footer?{name:"footer",fn:v(()=>[p(o.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","show-close","title","aria-level","onClose"])):X("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,Ae)]),_:3},8,["mask","overlay-class","z-index"]),[[he,e(g)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["to","disabled"]))}});var Fe=H(Ne,[["__file","dialog.vue"]]);const Oe=we(Fe),ze={ref:"modalTitleRef",class:"modal-title"},Ye={__name:"IDialog",props:{visible:{type:Boolean,default:!1},title:{type:String,default:"标题"},width:{type:[String,Number],default:520},mask:{type:Boolean,default:!0},centered:{type:Boolean,default:!1},destroyOnClose:{type:Boolean,default:!1},wrapClassName:{type:String,default:""},zIndex:{type:Number,default:1e3}},emits:["ok","cancel"],setup(t,{emit:a}){const r=t,u=A(!1);return ke(()=>r.visible,l=>{l&&(u.value=!0)}),(l,i)=>{const y=Oe;return k(),S("div",null,[T(y,{ref:"modalRef",modelValue:u.value,"onUpdate:modelValue":i[0]||(i[0]=s=>u.value=s),width:t.width,mask:t.mask,centered:t.centered,destroyOnClose:t.destroyOnClose,zIndex:t.zIndex,draggable:"","wrap-style":{overflow:"hidden"},wrapClassName:t.wrapClassName,footer:null,onOk:l.handleOk,onCancel:l.handleCancel},{title:v(()=>[I("div",ze,[Ee(j(t.title),1),p(l.$slots,"titleLink")],512)]),default:v(()=>[p(l.$slots,"default")]),_:3},8,["modelValue","width","mask","centered","destroyOnClose","zIndex","wrapClassName","onOk","onCancel"])])}}};export{Ye as default};
